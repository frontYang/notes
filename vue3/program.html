<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>vite2 + vue3 全家桶 + ant design vue | YNOTE</title>
    <meta name="generator" content="VuePress 1.7.1">
    
    <meta name="description" content="Front-end personal notes">
    
    <link rel="preload" href="/notes/assets/css/0.styles.9218c62b.css" as="style"><link rel="preload" href="/notes/assets/js/app.e0e3d082.js" as="script"><link rel="preload" href="/notes/assets/js/2.0959374c.js" as="script"><link rel="preload" href="/notes/assets/js/53.717d5128.js" as="script"><link rel="prefetch" href="/notes/assets/js/10.84eed784.js"><link rel="prefetch" href="/notes/assets/js/11.8a0d0835.js"><link rel="prefetch" href="/notes/assets/js/12.75633485.js"><link rel="prefetch" href="/notes/assets/js/13.2370e08a.js"><link rel="prefetch" href="/notes/assets/js/14.d7bc7ff4.js"><link rel="prefetch" href="/notes/assets/js/15.62bc4960.js"><link rel="prefetch" href="/notes/assets/js/16.7357c1df.js"><link rel="prefetch" href="/notes/assets/js/17.1eeafda7.js"><link rel="prefetch" href="/notes/assets/js/18.728ebc0c.js"><link rel="prefetch" href="/notes/assets/js/19.57b75972.js"><link rel="prefetch" href="/notes/assets/js/20.faa200fc.js"><link rel="prefetch" href="/notes/assets/js/21.3397241e.js"><link rel="prefetch" href="/notes/assets/js/22.014d9538.js"><link rel="prefetch" href="/notes/assets/js/23.4c2f6f7e.js"><link rel="prefetch" href="/notes/assets/js/24.d8d40441.js"><link rel="prefetch" href="/notes/assets/js/25.45ba08a7.js"><link rel="prefetch" href="/notes/assets/js/26.17816977.js"><link rel="prefetch" href="/notes/assets/js/27.bc8f8857.js"><link rel="prefetch" href="/notes/assets/js/28.b98ff412.js"><link rel="prefetch" href="/notes/assets/js/29.af6e04a3.js"><link rel="prefetch" href="/notes/assets/js/3.2bec8b40.js"><link rel="prefetch" href="/notes/assets/js/30.aa8fc462.js"><link rel="prefetch" href="/notes/assets/js/31.a0c6bd5a.js"><link rel="prefetch" href="/notes/assets/js/32.23f33eb8.js"><link rel="prefetch" href="/notes/assets/js/33.46076eff.js"><link rel="prefetch" href="/notes/assets/js/34.d67d65cf.js"><link rel="prefetch" href="/notes/assets/js/35.dd003770.js"><link rel="prefetch" href="/notes/assets/js/36.f4ae558d.js"><link rel="prefetch" href="/notes/assets/js/37.d1ed2784.js"><link rel="prefetch" href="/notes/assets/js/38.b8e5af04.js"><link rel="prefetch" href="/notes/assets/js/39.4bebe0bb.js"><link rel="prefetch" href="/notes/assets/js/4.52c1fa6a.js"><link rel="prefetch" href="/notes/assets/js/40.f8edb45e.js"><link rel="prefetch" href="/notes/assets/js/41.c6afbacc.js"><link rel="prefetch" href="/notes/assets/js/42.f17f95b9.js"><link rel="prefetch" href="/notes/assets/js/43.f49b43ba.js"><link rel="prefetch" href="/notes/assets/js/44.b4ea71f3.js"><link rel="prefetch" href="/notes/assets/js/45.9940fa62.js"><link rel="prefetch" href="/notes/assets/js/46.c7668f9e.js"><link rel="prefetch" href="/notes/assets/js/47.fc66fbe3.js"><link rel="prefetch" href="/notes/assets/js/48.9fdb5a19.js"><link rel="prefetch" href="/notes/assets/js/49.470aa2d5.js"><link rel="prefetch" href="/notes/assets/js/5.4328754f.js"><link rel="prefetch" href="/notes/assets/js/50.01d3055b.js"><link rel="prefetch" href="/notes/assets/js/51.2e704238.js"><link rel="prefetch" href="/notes/assets/js/52.dc9c3f98.js"><link rel="prefetch" href="/notes/assets/js/54.ffcee738.js"><link rel="prefetch" href="/notes/assets/js/55.7a3e5ee2.js"><link rel="prefetch" href="/notes/assets/js/56.c2b9f462.js"><link rel="prefetch" href="/notes/assets/js/57.7a8cd832.js"><link rel="prefetch" href="/notes/assets/js/6.06d7b0d9.js"><link rel="prefetch" href="/notes/assets/js/7.20e9b0e0.js"><link rel="prefetch" href="/notes/assets/js/8.0f7a3b5b.js"><link rel="prefetch" href="/notes/assets/js/9.9c3d7d5a.js">
    <link rel="stylesheet" href="/notes/assets/css/0.styles.9218c62b.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/notes/" class="home-link router-link-active"><!----> <span class="site-name">YNOTE</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/notes/" class="nav-link">
  缘起
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/notes/" class="nav-link">
  缘起
</a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/notes/" aria-current="page" class="sidebar-link">缘起</a></li><li><a href="/notes/guide.html" class="sidebar-link">目录</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>vue</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>vue3</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/notes/vue3/" aria-current="page" class="sidebar-link">目录</a></li><li><a href="/notes/vue3/base.html" class="sidebar-link">1. vue3 基础篇</a></li><li><a href="/notes/vue3/program.html" aria-current="page" class="active sidebar-link">vite2 + vue3 全家桶 + ant design vue</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/notes/vue3/program.html#使用-vite-创建项目" class="sidebar-link">使用 vite 创建项目</a></li><li class="sidebar-sub-header"><a href="/notes/vue3/program.html#配置-vite-config-js" class="sidebar-link">配置 vite.config.js</a></li><li class="sidebar-sub-header"><a href="/notes/vue3/program.html#vue-router-next" class="sidebar-link">vue-router@next</a></li><li class="sidebar-sub-header"><a href="/notes/vue3/program.html#vuex-next" class="sidebar-link">vuex@next</a></li><li class="sidebar-sub-header"><a href="/notes/vue3/program.html#sass" class="sidebar-link">sass</a></li><li class="sidebar-sub-header"><a href="/notes/vue3/program.html#typescript-支持" class="sidebar-link">typescript 支持</a></li><li class="sidebar-sub-header"><a href="/notes/vue3/program.html#ui-库-ant-design-vue-next" class="sidebar-link">UI 库（ant-design-vue@next）</a></li><li class="sidebar-sub-header"><a href="/notes/vue3/program.html#eslint-代码校验" class="sidebar-link">eslint（代码校验）</a></li><li class="sidebar-sub-header"><a href="/notes/vue3/program.html#stylelint-css-校验规则" class="sidebar-link">stylelint（css 校验规则）</a></li><li class="sidebar-sub-header"><a href="/notes/vue3/program.html#husky-git-提交规则" class="sidebar-link">husky （git 提交规则）</a></li><li class="sidebar-sub-header"><a href="/notes/vue3/program.html#axios" class="sidebar-link">axios</a></li><li class="sidebar-sub-header"><a href="/notes/vue3/program.html#动态读取文件" class="sidebar-link">动态读取文件</a></li><li class="sidebar-sub-header"><a href="/notes/vue3/program.html#全局引用" class="sidebar-link">全局引用</a></li><li class="sidebar-sub-header"><a href="/notes/vue3/program.html#遇到的问题" class="sidebar-link">遇到的问题</a></li></ul></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>react</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Typescript</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>js设计模式</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>第三方sdk</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>开发工具</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>数据库</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>取经阁</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>疯言疯语</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="vite2-vue3-全家桶-ant-design-vue"><a href="#vite2-vue3-全家桶-ant-design-vue" class="header-anchor">#</a> vite2 + vue3 全家桶 + ant design vue</h1> <h2 id="使用-vite-创建项目"><a href="#使用-vite-创建项目" class="header-anchor">#</a> 使用 vite 创建项目</h2> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token comment"># 创建项目（yarn）</span>
<span class="token function">yarn</span> create @vitejs/app

<span class="token comment"># 创建项目（npm）</span>
<span class="token function">npm</span> init @vitejs/app


<span class="token comment"># 创建集成vue的项目（yarn）**</span>
<span class="token function">yarn</span> create @vitejs/app my-vue-app --template vue

<span class="token comment"># 创建集成vue的项目（npm 6.x）</span>
<span class="token function">npm</span> init @vitejs/app my-vue-app --template vue

<span class="token comment"># 创建集成vue的项目（npm 7.x）</span>
<span class="token function">npm</span> init @vitejs/app my-vue-app -- --template vue
</code></pre></div><hr> <h2 id="配置-vite-config-js"><a href="#配置-vite-config-js" class="header-anchor">#</a> 配置 vite.config.js</h2> <p>1、别名定义：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// vite.config.js</span>

<span class="token keyword">import</span> path <span class="token keyword">from</span> <span class="token string">'path'</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token comment">// 别名定义</span>
  alias<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string">'@'</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'src'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token string">'comps'</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'src/components'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token string">'styles'</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'src/styles'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token comment">// import HelloWorld from './components/HelloWorld.vue'</span>
<span class="token comment">// 改成</span>
<span class="token comment">// import HelloWorld from 'comps/HelloWorld.vue'</span>
</code></pre></div><p>2、JSX 支持:</p> <p>安装依赖</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token comment"># yarn</span>
<span class="token function">yarn</span> <span class="token function">add</span> @vitejs/plugin-vue-jsx -D

<span class="token comment"># npm</span>
<span class="token function">npm</span> i @vitejs/plugin-vue-jsx -D
</code></pre></div><p>配置</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// vite.config.js</span>
<span class="token keyword">import</span> vue <span class="token keyword">from</span> <span class="token string">'@vitejs/plugin-vue'</span>
<span class="token keyword">import</span> vueJsx <span class="token keyword">from</span> <span class="token string">'@vitejs/plugin-vue-jsx'</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token function">vue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">vueJsx</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><p>使用</p> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>defineComponent<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">import</span> HelloWorld <span class="token keyword">from</span> <span class="token string">'comps/HelloWorld.vue'</span>
<span class="token keyword">import</span> logo <span class="token keyword">from</span> <span class="token string">'./assets/logo.png'</span>

<span class="token comment">// 2.用defineComponent定义组件且要导出</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineComponent</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token function-variable function">render</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Vue logo<span class="token punctuation">&quot;</span></span> <span class="token attr-name">src</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>logo<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">HelloWorld</span></span> <span class="token attr-name">msg</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Hello Vue 3 + Vite<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><hr> <p>3、mockjs 模拟数据：</p> <p>安装依赖</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token comment"># yarn</span>
<span class="token function">yarn</span> <span class="token function">add</span> mockjs -D
<span class="token function">yarn</span> <span class="token function">add</span> vite-plugin-mock cross-env -D

<span class="token comment"># npm</span>
<span class="token function">npm</span> i mockjs -D
<span class="token function">npm</span> i vite-plugin-mock cross-env -D

</code></pre></div><p>配置</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// vite.config.js</span>
<span class="token keyword">import</span> vue <span class="token keyword">from</span> <span class="token string">'@vitejs/plugin-vue'</span>
<span class="token keyword">import</span> vueJsx <span class="token keyword">from</span> <span class="token string">'@vitejs/plugin-vue-jsx'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>viteMockServe<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vite-plugin-mock'</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token function">vue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">vueJsx</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">viteMockServe</span><span class="token punctuation">(</span><span class="token punctuation">{</span>supportTs<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><p>改 dev 命令</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token comment">// package.json</span>
<span class="token punctuation">{</span>
  <span class="token property">&quot;script&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;dev&quot;</span><span class="token operator">:</span> <span class="token string">&quot;cross-env NODE_ENV=development vite&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><hr> <h2 id="vue-router-next"><a href="#vue-router-next" class="header-anchor">#</a> vue-router@next</h2> <p>安装依赖</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token comment">#yarn</span>
<span class="token function">yarn</span> <span class="token function">add</span> vue-router@next

<span class="token comment">#npm</span>
<span class="token function">npm</span> i vue-router@next
</code></pre></div><p>新建文件 <code>src/router/index.js</code>，新添加 home.vue</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>createRouter<span class="token punctuation">,</span> createWebHashHistory<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue-router'</span>

<span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token function">createRouter</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  history<span class="token operator">:</span> <span class="token function">createWebHashHistory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  routes<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>path<span class="token operator">:</span> <span class="token string">'/'</span><span class="token punctuation">,</span> <span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'@/views/home'</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> router
</code></pre></div><p><code>main.js</code> 引入 <code>router</code> 文件</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// main.js</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>createApp<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">import</span> App <span class="token keyword">from</span> <span class="token string">'./App'</span>
<span class="token keyword">import</span> router <span class="token keyword">from</span> <span class="token string">'@/router'</span>

<span class="token function">createApp</span><span class="token punctuation">(</span>App<span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>router<span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">mount</span><span class="token punctuation">(</span><span class="token string">'#app'</span><span class="token punctuation">)</span>
</code></pre></div><p>修改 App.vue，引入路由组件</p> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token comment">// App.vue</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>defineComponent<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token comment">// 2.用defineComponent定义组件且要导出</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineComponent</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token function-variable function">render</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-view</span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><hr> <h2 id="vuex-next"><a href="#vuex-next" class="header-anchor">#</a> vuex@next</h2> <p>安装依赖</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token comment">#yarn</span>
<span class="token function">yarn</span> <span class="token function">add</span> vuex@next

<span class="token comment">#npm</span>
<span class="token function">npm</span> i vuex@next

</code></pre></div><p>新建文件 <code>src/store/index.js</code></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>createStore<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vuex'</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token function">createStore</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  state<span class="token operator">:</span> <span class="token punctuation">{</span>
    couter<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p><code>main.js</code> 引入 <code>store</code> 文件</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>createApp<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">import</span> App <span class="token keyword">from</span> <span class="token string">'./App.vue'</span>
<span class="token keyword">import</span> router <span class="token keyword">from</span> <span class="token string">'@/router'</span>
<span class="token keyword">import</span> store <span class="token keyword">from</span> <span class="token string">'@/store'</span>

<span class="token function">createApp</span><span class="token punctuation">(</span>App<span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>router<span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>store<span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">mount</span><span class="token punctuation">(</span><span class="token string">'#app'</span><span class="token punctuation">)</span>
</code></pre></div><hr> <h2 id="sass"><a href="#sass" class="header-anchor">#</a> sass</h2> <p>安装</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token comment">#yarn</span>
<span class="token function">yarn</span> <span class="token function">add</span> sass -D

<span class="token comment">#npm</span>
<span class="token function">npm</span> i sass -D
</code></pre></div><p>新建文件夹 <code>src/styles/index.scss</code></p> <p>引入 <code>main.js</code> 内</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token string">'@/styles/index.scss'</span>
</code></pre></div><hr> <h2 id="typescript-支持"><a href="#typescript-支持" class="header-anchor">#</a> typescript 支持</h2> <p>安装</p> <div class="language- extra-class"><pre class="language-text"><code>yarn add typescript -D
</code></pre></div><p>在根目录添加文件 <code>tsconfig.js</code></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">{</span>
  <span class="token string">&quot;compilerOptions&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;target&quot;</span><span class="token operator">:</span> <span class="token string">&quot;esnext&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;module&quot;</span><span class="token operator">:</span> <span class="token string">&quot;esnext&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;strict&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token string">&quot;jsx&quot;</span><span class="token operator">:</span> <span class="token string">&quot;preserve&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;moduleResolution&quot;</span><span class="token operator">:</span> <span class="token string">&quot;node&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;esModuleInterop&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token string">&quot;baseUrl&quot;</span><span class="token operator">:</span> <span class="token string">&quot;.&quot;</span><span class="token punctuation">,</span>
    <span class="token comment">// 若有未使用的局部变量则抛错</span>
    <span class="token string">&quot;noUnusedLocals&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token comment">// 若有未使用的参数则抛错</span>
    <span class="token string">&quot;noUnusedParameters&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token comment">// 类型为any时，是否需要发出警告，设置true，则不警告</span>
    <span class="token string">&quot;noImplicitAny&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token comment">// 提供迭代器全面支持</span>
    <span class="token string">&quot;downlevelIteration&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token comment">// 去掉注解</span>
    <span class="token string">&quot;removeComments&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token comment">// 从tslib导入外部的辅助方法</span>
    <span class="token string">&quot;importHelpers&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token comment">// 遇到@internal注解时，不会触发代码定义</span>
    <span class="token string">&quot;stripInternal&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token comment">// 错误信息，跟踪信息将带有颜色和样式</span>
    <span class="token string">&quot;pretty&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token comment">// 如果不是函数中的所有路径都有返回值，则提示Error</span>
    <span class="token string">&quot;noImplicitReturns&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token comment">// 允许从没有设置默认导出的模块中默认导入</span>
    <span class="token string">&quot;allowSyntheticDefaultImports&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token comment">// 使用元数据特性</span>
    <span class="token string">&quot;emitDecoratorMetadata&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token comment">// 支持ES7的装饰器特性</span>
    <span class="token string">&quot;experimentalDecorators&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token comment">// 将严格校验switch-case语法</span>
    <span class="token string">&quot;noFallthroughCasesInSwitch&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token comment">// 严格null检查模式，null和undefined值不包含在任何类型里</span>
    <span class="token string">&quot;strictNullChecks&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token comment">// 保存上一次的编译信息，下一次进行增量更新</span>
    <span class="token string">&quot;incremental&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token comment">// 不生成定义文件d.ts</span>
    <span class="token string">&quot;declaration&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token comment">// 生成.map文件</span>
    <span class="token string">&quot;sourceMap&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token comment">// 跳过默认库检查</span>
    <span class="token string">&quot;skipLibCheck&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token comment">// 输出文件的根目录</span>
    <span class="token string">&quot;outDir&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./dist&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;types&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token string">&quot;webpack-env&quot;</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token string">&quot;paths&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token string">&quot;@/*&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token string">&quot;src/*&quot;</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token string">&quot;@ass/*&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token string">&quot;src/assets/*&quot;</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token string">&quot;@img/*&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token string">&quot;src/assets/images/*&quot;</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token string">&quot;@css/*&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token string">&quot;src/style/*&quot;</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token string">&quot;@view/*&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token string">&quot;src/views/*&quot;</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token string">&quot;@util/*&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token string">&quot;src/utils/*&quot;</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token string">&quot;@api/*&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token string">&quot;src/utils/api/*&quot;</span>
      <span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string">&quot;lib&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token string">&quot;esnext&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;dom&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;dom.iterable&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;scripthost&quot;</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token string">&quot;include&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">&quot;./src&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;./typings/&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;src/**/*.js&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;src/**/*.ts&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;src/**/*.vue&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;src/**/*.tsx&quot;</span><span class="token punctuation">,</span>
    <span class="token comment">// &quot;tests/**/*.ts&quot;,</span>
    <span class="token comment">//   &quot;tests/**/*.t, &quot;typings/shims-vue.d.ts&quot;sx&quot;</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token string">&quot;typings&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./typings/index.d.ts&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;exclude&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">&quot;node_modules&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;tslint:latest&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;tslint-config-prettier&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;mock&quot;</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>

</code></pre></div><p>在根目录添加 <code>shim.d.ts</code></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">/* eslint-disable */</span>
<span class="token keyword">import</span> <span class="token keyword">type</span> <span class="token punctuation">{</span> DefineComponent <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>

<span class="token keyword">declare</span> <span class="token keyword">module</span> <span class="token string">'*.vue'</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> component<span class="token operator">:</span> DefineComponent<span class="token operator">&lt;</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token builtin">any</span><span class="token operator">&gt;</span>
  <span class="token keyword">export</span> <span class="token keyword">default</span> component
<span class="token punctuation">}</span>

</code></pre></div><p>把 <code>main.js</code> 修改成 <code>main.ts</code></p> <hr> <h2 id="ui-库-ant-design-vue-next"><a href="#ui-库-ant-design-vue-next" class="header-anchor">#</a> UI 库（ant-design-vue@next）</h2> <p>安装</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token comment">#yarn</span>
<span class="token function">yarn</span> <span class="token function">add</span> ant-design-vue@next @ant-design/icons-vue

<span class="token comment">#npm</span>
<span class="token function">npm</span> i ant-design-vue@next @ant-design/icons-vue

</code></pre></div><p>作为插件配置，添加文件 <code>plugins/ant-design-vue.js</code>（建议在每个 vue 文件内按需引入）</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 完整引入</span>
<span class="token keyword">import</span> Antd <span class="token keyword">from</span> <span class="token string">'ant-design-vue'</span>
<span class="token keyword">import</span> <span class="token string">'ant-design-vue/dist/antd.css'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">app</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 完整引入</span>
  app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>Antd<span class="token punctuation">)</span>

  <span class="token comment">// 按需引入</span>
  <span class="token comment">// app.use(ElButton);</span>
<span class="token punctuation">}</span>
</code></pre></div><p>在 <code>main.js</code> 里面引入</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>createApp<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">import</span> App <span class="token keyword">from</span> <span class="token string">'./App1.vue'</span>
<span class="token keyword">import</span> router <span class="token keyword">from</span> <span class="token string">'@/router'</span>
<span class="token keyword">import</span> store <span class="token keyword">from</span> <span class="token string">'@/store'</span>
<span class="token keyword">import</span> <span class="token string">'@/styles/index.scss'</span>
<span class="token keyword">import</span> antDesign <span class="token keyword">from</span> <span class="token string">'@/plugins/ant-design-vue'</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">createApp</span><span class="token punctuation">(</span>App<span class="token punctuation">)</span>

<span class="token function">antDesign</span><span class="token punctuation">(</span>app<span class="token punctuation">)</span>

app
  <span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>router<span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>store<span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">mount</span><span class="token punctuation">(</span><span class="token string">'#app'</span><span class="token punctuation">)</span>
</code></pre></div><hr> <h2 id="eslint-代码校验"><a href="#eslint-代码校验" class="header-anchor">#</a> eslint（代码校验）</h2> <p>安装依赖</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">yarn</span> <span class="token function">add</span> eslint  eslint-plugin-prettier eslint-plugin-vue -D

</code></pre></div><p>配置规则，在新目录新增 <code>.eslintrc.js</code></p> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  root<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  env<span class="token operator">:</span> <span class="token punctuation">{</span>
    node<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token keyword">extends</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'plugin:vue/vue3-recommended'</span><span class="token punctuation">,</span> <span class="token string">'eslint:recommended'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  parserOptions<span class="token operator">:</span> <span class="token punctuation">{</span>
    parser<span class="token operator">:</span> <span class="token string">'babel-eslint'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  rules<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string">'no-console'</span><span class="token operator">:</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span> <span class="token operator">===</span> <span class="token string">'production'</span> <span class="token operator">?</span> <span class="token string">'warn'</span> <span class="token operator">:</span> <span class="token string">'off'</span><span class="token punctuation">,</span>
    <span class="token string">'no-debugger'</span><span class="token operator">:</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span> <span class="token operator">===</span> <span class="token string">'production'</span> <span class="token operator">?</span> <span class="token string">'warn'</span> <span class="token operator">:</span> <span class="token string">'off'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><p>如需使用 typescript，则加入 typescript 校验规则：</p> <p>增加<code>typescript</code>校验规则</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">yarn</span> <span class="token function">add</span> @typescript-eslint/parser @typescript-eslint/eslint-plugin -D
</code></pre></div><p>将 <code>eslintrc.js</code> 文件改成如下配置项，可根据自身项目来定义规则</p> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  parser<span class="token operator">:</span> <span class="token string">'vue-eslint-parser'</span><span class="token punctuation">,</span>
  parserOptions<span class="token operator">:</span> <span class="token punctuation">{</span>
    parser<span class="token operator">:</span> <span class="token string">'@typescript-eslint/parser'</span><span class="token punctuation">,</span>
    ecmaVersion<span class="token operator">:</span> <span class="token number">2020</span><span class="token punctuation">,</span>
    sourceType<span class="token operator">:</span> <span class="token string">'module'</span><span class="token punctuation">,</span>
    ecmaFeatures<span class="token operator">:</span> <span class="token punctuation">{</span>
      jsx<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token keyword">extends</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'plugin:vue/vue3-recommended'</span><span class="token punctuation">,</span> <span class="token string">'plugin:@typescript-eslint/recommended'</span><span class="token punctuation">,</span> <span class="token string">'prettier/@typescript-eslint'</span><span class="token punctuation">,</span> <span class="token string">'plugin:prettier/recommended'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  rules<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string">'@typescript-eslint/ban-ts-ignore'</span><span class="token operator">:</span> <span class="token string">'off'</span><span class="token punctuation">,</span>
    <span class="token string">'@typescript-eslint/explicit-function-return-type'</span><span class="token operator">:</span> <span class="token string">'off'</span><span class="token punctuation">,</span>
    <span class="token string">'@typescript-eslint/no-explicit-any'</span><span class="token operator">:</span> <span class="token string">'off'</span><span class="token punctuation">,</span>
    <span class="token string">'@typescript-eslint/no-var-requires'</span><span class="token operator">:</span> <span class="token string">'off'</span><span class="token punctuation">,</span>
    <span class="token string">'@typescript-eslint/no-empty-function'</span><span class="token operator">:</span> <span class="token string">'off'</span><span class="token punctuation">,</span>
    <span class="token string">'vue/custom-event-name-casing'</span><span class="token operator">:</span> <span class="token string">'off'</span><span class="token punctuation">,</span>
    <span class="token string">'no-use-before-define'</span><span class="token operator">:</span> <span class="token string">'off'</span><span class="token punctuation">,</span>
    <span class="token string">'@typescript-eslint/no-use-before-define'</span><span class="token operator">:</span> <span class="token string">'off'</span><span class="token punctuation">,</span>
    <span class="token string">'@typescript-eslint/ban-ts-comment'</span><span class="token operator">:</span> <span class="token string">'off'</span><span class="token punctuation">,</span>
    <span class="token string">'@typescript-eslint/ban-types'</span><span class="token operator">:</span> <span class="token string">'off'</span><span class="token punctuation">,</span>
    <span class="token string">'@typescript-eslint/no-non-null-assertion'</span><span class="token operator">:</span> <span class="token string">'off'</span><span class="token punctuation">,</span>
    <span class="token string">'@typescript-eslint/explicit-module-boundary-types'</span><span class="token operator">:</span> <span class="token string">'off'</span><span class="token punctuation">,</span>
    <span class="token string">'@typescript-eslint/no-unused-vars'</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token string">'error'</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        argsIgnorePattern<span class="token operator">:</span> <span class="token string">'^h$'</span><span class="token punctuation">,</span>
        varsIgnorePattern<span class="token operator">:</span> <span class="token string">'^h$'</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><hr> <h2 id="stylelint-css-校验规则"><a href="#stylelint-css-校验规则" class="header-anchor">#</a> stylelint（css 校验规则）</h2> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">yarn</span> <span class="token function">add</span> stylelint-config-rational-order stylelint-config-standard stylelint-declaration-block-no-ignored-properties stylelint-order -D

</code></pre></div><p>在根目录新增文件 <code>.stylelintrc.js</code></p> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token keyword">extends</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'stylelint-config-standard'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  rules<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string">'at-rule-no-unknown'</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        ignoreAtRules<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'function'</span><span class="token punctuation">,</span> <span class="token string">'if'</span><span class="token punctuation">,</span> <span class="token string">'each'</span><span class="token punctuation">,</span> <span class="token string">'include'</span><span class="token punctuation">,</span> <span class="token string">'mixin'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token string">'selector-pseudo-element-no-unknown'</span><span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
    <span class="token string">'comment-empty-line-before'</span><span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
    <span class="token string">'declaration-empty-line-before'</span><span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
    <span class="token string">'function-name-case'</span><span class="token operator">:</span> <span class="token string">'lower'</span><span class="token punctuation">,</span>
    <span class="token string">'no-descending-specificity'</span><span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
    <span class="token string">'no-invalid-double-slash-comments'</span><span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
    <span class="token string">'rule-empty-line-before'</span><span class="token operator">:</span> <span class="token string">'always'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  ignoreFiles<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'node_modules/**/*'</span><span class="token punctuation">,</span> <span class="token string">'build/**/*'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><hr> <h2 id="husky-git-提交规则"><a href="#husky-git-提交规则" class="header-anchor">#</a> husky （git 提交规则）</h2> <p>安装依赖</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">yarn</span> <span class="token function">add</span> husky lint-staged -D

</code></pre></div><p>在 <code>package.json</code> 中加入如下配置</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token property">&quot;husky&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;hooks&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;pre-commit&quot;</span><span class="token operator">:</span> <span class="token string">&quot;lint-staged&quot;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;lint-staged&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;*.{js,vue}&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token string">&quot;eslint --fix&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;git add&quot;</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token property">&quot;*.{css, scss,vue}&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token string">&quot;stylelint src/**/*.{css,scss} --syntax=scss --fix&quot;</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
</code></pre></div><hr> <h2 id="axios"><a href="#axios" class="header-anchor">#</a> axios</h2> <p>安装</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">yarn</span> <span class="token function">add</span> axios
</code></pre></div><p>封装导出</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// main.js</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>http<span class="token punctuation">,</span> apis<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@/api/index'</span>
app<span class="token punctuation">.</span><span class="token function">provide</span><span class="token punctuation">(</span><span class="token string">'$http'</span><span class="token punctuation">,</span> http<span class="token punctuation">)</span>
app<span class="token punctuation">.</span><span class="token function">provide</span><span class="token punctuation">(</span><span class="token string">'$apis'</span><span class="token punctuation">,</span> apis<span class="token punctuation">)</span>

<span class="token comment">// 组件内</span>

<span class="token keyword">import</span> <span class="token punctuation">{</span>inject<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineComponent</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> $apis <span class="token operator">=</span> <span class="token function">inject</span><span class="token punctuation">(</span><span class="token string">'$apis'</span><span class="token punctuation">)</span>
    <span class="token comment">// $apis.get(url, {})</span>
    <span class="token comment">// $apis.post(url, {})</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><hr> <h2 id="动态读取文件"><a href="#动态读取文件" class="header-anchor">#</a> 动态读取文件</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> routerFunc <span class="token operator">=</span> <span class="token keyword">import</span><span class="token punctuation">.</span>meta<span class="token punctuation">.</span><span class="token function">globEager</span><span class="token punctuation">(</span><span class="token string">'../views/**/router.js'</span><span class="token punctuation">)</span>

<span class="token comment">//列出所有路由文件</span>
<span class="token keyword">const</span> routerList <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>routerFunc<span class="token punctuation">)</span>
<span class="token keyword">const</span> routeMapList <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
routerList<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">val</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> itemRouter <span class="token operator">=</span> routerFunc<span class="token punctuation">[</span>val<span class="token punctuation">]</span><span class="token punctuation">.</span>default
  <span class="token keyword">if</span> <span class="token punctuation">(</span>Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>itemRouter<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    itemRouter<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      routeMapList<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    routeMapList<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>itemRouter<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><hr> <h2 id="全局引用"><a href="#全局引用" class="header-anchor">#</a> 全局引用</h2> <p>建议使用 provide/inject</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// main.js</span>
app<span class="token punctuation">.</span><span class="token function">provide</span><span class="token punctuation">(</span><span class="token string">'$http'</span><span class="token punctuation">,</span> http<span class="token punctuation">)</span>
app<span class="token punctuation">.</span><span class="token function">provide</span><span class="token punctuation">(</span><span class="token string">'$apis'</span><span class="token punctuation">,</span> apis<span class="token punctuation">)</span>
app<span class="token punctuation">.</span><span class="token function">provide</span><span class="token punctuation">(</span><span class="token string">'$intf'</span><span class="token punctuation">,</span> intf<span class="token punctuation">)</span>

<span class="token comment">// 组件</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>inject<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">const</span> $apis <span class="token operator">=</span> <span class="token function">inject</span><span class="token punctuation">(</span><span class="token string">'$apis'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> $intf <span class="token operator">=</span> <span class="token function">inject</span><span class="token punctuation">(</span><span class="token string">'$intf'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> $http <span class="token operator">=</span> <span class="token function">inject</span><span class="token punctuation">(</span><span class="token string">'$http'</span><span class="token punctuation">)</span>
</code></pre></div><hr> <h2 id="遇到的问题"><a href="#遇到的问题" class="header-anchor">#</a> 遇到的问题</h2> <ul><li>运行报错
原因：引入组件时没有指定 .vue 后缀名</li></ul> <div class="language-txt extra-class"><pre class="language-text"><code>index:1 Failed to load module script: The server responded with a non-JavaScript MIME type of &quot;text/html&quot;. Strict MIME type checking is enforced for module scripts per HTML spec.
</code></pre></div><ul><li>这一步后报错了，没找到原因，暂时跳过 mock
原因：需要将文件名换成 jsx，不使用.vue 后缀</li></ul> <div class="language-txt extra-class"><pre class="language-text"><code>&gt; html:G:/WORK/git/qianduan/admin_vue3/src/App.vue: error: Unexpected &quot;&lt;&quot;
    9 │     &lt;&gt;
      ╵     ^

error when starting dev server:
Error: Build failed with 1 error:
html:G:/WORK/git/qianduan/admin_vue3/src/App.vue:9:4: error: Unexpected &quot;&lt;&quot;
    at failureErrorWithLog (G:\WORK\git\qianduan\admin_vue3\node_modules\esbuild\lib\main.js:1134:15)
    at buildResponseToResult (G:\WORK\git\qianduan\admin_vue3\node_modules\esbuild\lib\main.js:885:32)
    at G:\WORK\git\qianduan\admin_vue3\node_modules\esbuild\lib\main.js:980:20
    at G:\WORK\git\qianduan\admin_vue3\node_modules\esbuild\lib\main.js:541:9
    at handleIncomingPacket (G:\WORK\git\qianduan\admin_vue3\node_modules\esbuild\lib\main.js:630:9)
    at Socket.readFromStdout (G:\WORK\git\qianduan\admin_vue3\node_modules\esbuild\lib\main.js:508:7)
    at Socket.emit (events.js:315:20)
    at addChunk (internal/streams/readable.js:309:12)
    at readableAddChunk (internal/streams/readable.js:284:9)
    at Socket.Readable.push (internal/streams/readable.js:223:10)
</code></pre></div><ul><li>ant icon 警告：</li></ul> <div class="language-txt extra-class"><pre class="language-text"><code>warning.js:6 Warning: [antdv: Icon] Empty Icon
</code></pre></div><ul><li><p>运行 mock 报错
原因：配置了 tsconfig，但没有用到，删除 tsconfig 或者 忽略 mock 文件
[vite:mock-server]:mock reload error!</p></li> <li><p>加入 typescript 后 找不到模块“./App.vue”或其相应的类型声明
原因：重启 vscode 后未重现</p></li> <li><p>ant design vue 全局换主题未生效，只改变了 a 标签的颜色，使用的 <code>vite-plugin-theme</code> 插件
原因：？？？</p></li></ul> <hr></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">上次更新时间:</span> <span class="time">4/7/2021, 9:56:02 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/notes/vue3/base.html" class="prev">
        1. vue3 基础篇
      </a></span> <span class="next"><a href="/notes/react/">
        react
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/notes/assets/js/app.e0e3d082.js" defer></script><script src="/notes/assets/js/2.0959374c.js" defer></script><script src="/notes/assets/js/53.717d5128.js" defer></script>
  </body>
</html>
